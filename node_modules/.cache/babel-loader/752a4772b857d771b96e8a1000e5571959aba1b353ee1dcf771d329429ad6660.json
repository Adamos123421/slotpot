{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adams\\\\OneDrive\\\\Desktop\\\\Work\\\\slotpot\\\\src\\\\components\\\\MobileChat.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Send, Users, Wifi, WifiOff, RefreshCw } from 'lucide-react';\nimport useChat from '../hooks/useChat';\nimport './MobileChat.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MobileChat = () => {\n  _s();\n  var _serverStats$gameStat, _serverStats$gameStat2;\n  const [newMessage, setNewMessage] = useState('');\n  const [showConnectionError, setShowConnectionError] = useState(false);\n  const [isUserScrolling, setIsUserScrolling] = useState(false);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const messagesEndRef = useRef(null);\n  const inputRef = useRef(null);\n  const chatMessagesRef = useRef(null);\n  const scrollTimeoutRef = useRef(null);\n  const lastMessageCountRef = useRef(0);\n  const {\n    messages,\n    isConnected,\n    isTyping,\n    typingUsers,\n    connectionError,\n    serverStats,\n    isLoadingStats,\n    sendMessage,\n    handleTyping,\n    reconnect,\n    refreshStats,\n    getChatStats,\n    userInfo\n  } = useChat();\n  const scrollToBottom = useCallback((force = false) => {\n    if (chatMessagesRef.current && (!isUserScrolling || force)) {\n      chatMessagesRef.current.scrollTop = chatMessagesRef.current.scrollHeight;\n    }\n  }, [isUserScrolling]);\n  const checkIfUserIsAtBottom = () => {\n    if (!chatMessagesRef.current) return true;\n    const {\n      scrollTop,\n      scrollHeight,\n      clientHeight\n    } = chatMessagesRef.current;\n    return scrollHeight - scrollTop - clientHeight < 50;\n  };\n  const handleScroll = () => {\n    if (scrollTimeoutRef.current) {\n      clearTimeout(scrollTimeoutRef.current);\n    }\n    setIsUserScrolling(!checkIfUserIsAtBottom());\n\n    // Clear scrolling state after 3 seconds of no scrolling\n    scrollTimeoutRef.current = setTimeout(() => {\n      setIsUserScrolling(false);\n      scrollTimeoutRef.current = null;\n    }, 3000);\n\n    // Clear unread count if user scrolls to bottom\n    if (checkIfUserIsAtBottom()) {\n      setUnreadCount(0);\n    }\n  };\n  const handleScrollToBottomClick = () => {\n    setUnreadCount(0);\n    setIsUserScrolling(false);\n    scrollToBottom(true);\n  };\n  useEffect(() => {\n    // Only auto-scroll for new messages if user hasn't manually scrolled up\n    // and no scroll timeout is active (meaning user isn't currently scrolling)\n    const lastMessage = messages[messages.length - 1];\n    const isOwnMessage = lastMessage === null || lastMessage === void 0 ? void 0 : lastMessage.isOwnMessage;\n    const newMessageAdded = messages.length > lastMessageCountRef.current;\n    if (newMessageAdded && !scrollTimeoutRef.current) {\n      if (isOwnMessage) {\n        // Always scroll to bottom for user's own messages\n        setIsUserScrolling(false);\n        scrollToBottom(true);\n      } else {\n        // Only scroll if user is already at bottom\n        if (!isUserScrolling) {\n          scrollToBottom(false);\n        } else {\n          // Increment unread count if user is scrolled up\n          setUnreadCount(prev => prev + 1);\n        }\n      }\n    }\n    lastMessageCountRef.current = messages.length;\n  }, [messages, isUserScrolling, scrollToBottom]);\n\n  // Reset user scrolling state when they send a message\n  useEffect(() => {\n    var _messages;\n    if (messages.length > 0 && (_messages = messages[messages.length - 1]) !== null && _messages !== void 0 && _messages.isOwnMessage) {\n      setIsUserScrolling(false);\n      setUnreadCount(0);\n    }\n  }, [messages]);\n\n  // Show connection error temporarily\n  useEffect(() => {\n    if (connectionError) {\n      setShowConnectionError(true);\n      const timer = setTimeout(() => setShowConnectionError(false), 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [connectionError]);\n\n  // Cleanup timeout on unmount\n  useEffect(() => {\n    return () => {\n      if (scrollTimeoutRef.current) {\n        clearTimeout(scrollTimeoutRef.current);\n      }\n    };\n  }, []);\n  const handleSendMessage = e => {\n    e.preventDefault();\n    if (!newMessage.trim() || !isConnected) return;\n    const success = sendMessage(newMessage);\n    if (success) {\n      var _inputRef$current;\n      setNewMessage('');\n      setIsUserScrolling(false); // Ensure we scroll to bottom after sending\n      (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.focus();\n    }\n  };\n  const handleInputChange = e => {\n    const value = e.target.value;\n    setNewMessage(value);\n\n    // Send typing indicator\n    if (value.trim() && !isTyping) {\n      handleTyping(true);\n    } else if (!value.trim() && isTyping) {\n      handleTyping(false);\n    }\n  };\n  const handleInputBlur = () => {\n    // Stop typing when input loses focus\n    if (isTyping) {\n      handleTyping(false);\n    }\n  };\n  const getMessageType = message => {\n    if (message.type === 'system') return 'system';\n    if (message.type === 'bet') return 'bet';\n    if (message.isOwnMessage) return 'own';\n    return 'user';\n  };\n  const getUserLevel = username => {\n    // Generate consistent level based on username\n    const hash = username.split('').reduce((acc, char) => {\n      return acc + char.charCodeAt(0);\n    }, 0);\n    return hash % 50 + 1;\n  };\n  const generateAvatar = name => {\n    const colors = ['#8b5cf6', '#a855f7', '#06b6d4', '#10b981', '#f59e0b', '#ef4444', '#ec4899', '#8b5cf6'];\n    const colorIndex = name.charCodeAt(0) % colors.length;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"generated-avatar-mobile\",\n      style: {\n        backgroundColor: colors[colorIndex]\n      },\n      children: name.charAt(0).toUpperCase()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this);\n  };\n  const formatTypingUsers = () => {\n    if (typingUsers.length === 0) return '';\n    if (typingUsers.length === 1) return `${typingUsers[0]} is typing...`;\n    if (typingUsers.length === 2) return `${typingUsers[0]} and ${typingUsers[1]} are typing...`;\n    return `${typingUsers[0]} and ${typingUsers.length - 1} others are typing...`;\n  };\n  const stats = getChatStats();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mobile-chat-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mobile-chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-title-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-icon\",\n          children: \"\\uD83D\\uDCAC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"chat-title\",\n            children: \"Degen Chat\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-status\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `status-dot ${isConnected ? 'connected' : 'disconnected'}`,\n              children: isConnected ? /*#__PURE__*/_jsxDEV(Wifi, {\n                size: 8\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 32\n              }, this) : /*#__PURE__*/_jsxDEV(WifiOff, {\n                size: 8\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 52\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"online-count\",\n              children: isLoadingStats ? '...' : serverStats.connectedUsers\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mobile-header-controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: refreshStats,\n          className: \"refresh-btn-mobile\",\n          title: \"Refresh\",\n          disabled: isLoadingStats,\n          children: /*#__PURE__*/_jsxDEV(RefreshCw, {\n            size: 12,\n            className: isLoadingStats ? 'spinning' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this), !isConnected && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: reconnect,\n          className: \"reconnect-btn-mobile\",\n          title: \"Reconnect\",\n          children: /*#__PURE__*/_jsxDEV(RefreshCw, {\n            size: 12\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this), showConnectionError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mobile-connection-error\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\u26A0\\uFE0F Connection failed. \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: reconnect,\n        className: \"error-reconnect-btn-mobile\",\n        children: \"Reconnect\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"live-airdrop-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"airdrop-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"live-indicator\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"live-dot\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"LIVE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"airdrop-title\",\n          children: \"JACKPOT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"airdrop-amount\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"currency-symbol\",\n          children: \"\\u2248\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"amount\",\n          children: ((_serverStats$gameStat = serverStats.gameState) === null || _serverStats$gameStat === void 0 ? void 0 : (_serverStats$gameStat2 = _serverStats$gameStat.jackpot) === null || _serverStats$gameStat2 === void 0 ? void 0 : _serverStats$gameStat2.toFixed(3)) || '0.000'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Users, {\n          size: 16,\n          className: \"users-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mobile-chat-messages\",\n      ref: chatMessagesRef,\n      onScroll: handleScroll,\n      children: [messages.length === 0 && isConnected && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mobile-chat-empty\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-icon\",\n          children: \"\\uD83D\\uDCAC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No messages yet!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          children: \"Start the conversation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 11\n      }, this), messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `mobile-message ${getMessageType(message)}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-avatar\",\n          children: generateAvatar(message.username || message.user)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-header\",\n            children: [message.type === 'system' ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"username system\",\n              children: \"System\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 19\n            }, this) : message.type === 'bet' ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"username bet\",\n              children: \"\\uD83C\\uDFB0 Bet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"username\",\n                children: message.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"user-level\",\n                children: getUserLevel(message.username)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 21\n              }, this), message.username === userInfo.username && userInfo.isPremium && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"premium-badge-mobile\",\n                children: \"\\u2B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"timestamp\",\n              children: message.formattedTime\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-text\",\n            children: message.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 13\n        }, this)]\n      }, message.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 11\n      }, this)), typingUsers.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mobile-typing-indicator\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"typing-dots-mobile\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"typing-text-mobile\",\n          children: formatTypingUsers()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this), isUserScrolling && unreadCount > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"new-messages-indicator\",\n        onClick: handleScrollToBottomClick,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"new-message-count\",\n          children: unreadCount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"new-message-text\",\n          children: [\"new message\", unreadCount > 1 ? 's' : '']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"scroll-down-arrow\",\n          children: \"\\u2193\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"mobile-message-input\",\n      onSubmit: handleSendMessage,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ref: inputRef,\n        type: \"text\",\n        value: newMessage,\n        onChange: handleInputChange,\n        onBlur: handleInputBlur,\n        placeholder: isConnected ? \"Type Message Here...\" : \"Connecting...\",\n        className: \"message-input\",\n        maxLength: 500,\n        disabled: !isConnected\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"send-btn\",\n        disabled: !newMessage.trim() || !isConnected,\n        children: /*#__PURE__*/_jsxDEV(Send, {\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mobile-chat-footer\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-rules\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\uD83D\\uDCAC Chat Rules\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-count\",\n        children: [/*#__PURE__*/_jsxDEV(Users, {\n          size: 12\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: stats.totalMessages\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 9\n      }, this), userInfo.isRealUser && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"telegram-badge-mobile\",\n        children: \"\\uD83D\\uDCF1 Telegram\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"server-status-mobile\",\n        children: [\"\\uD83C\\uDF10 \", serverStats.serverStatus]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 192,\n    columnNumber: 5\n  }, this);\n};\n_s(MobileChat, \"Nz5s0b5HsEKxX+ZQi00nmyp4O8g=\", false, function () {\n  return [useChat];\n});\n_c = MobileChat;\nexport default MobileChat;\nvar _c;\n$RefreshReg$(_c, \"MobileChat\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","Send","Users","Wifi","WifiOff","RefreshCw","useChat","jsxDEV","_jsxDEV","Fragment","_Fragment","MobileChat","_s","_serverStats$gameStat","_serverStats$gameStat2","newMessage","setNewMessage","showConnectionError","setShowConnectionError","isUserScrolling","setIsUserScrolling","unreadCount","setUnreadCount","messagesEndRef","inputRef","chatMessagesRef","scrollTimeoutRef","lastMessageCountRef","messages","isConnected","isTyping","typingUsers","connectionError","serverStats","isLoadingStats","sendMessage","handleTyping","reconnect","refreshStats","getChatStats","userInfo","scrollToBottom","force","current","scrollTop","scrollHeight","checkIfUserIsAtBottom","clientHeight","handleScroll","clearTimeout","setTimeout","handleScrollToBottomClick","lastMessage","length","isOwnMessage","newMessageAdded","prev","_messages","timer","handleSendMessage","e","preventDefault","trim","success","_inputRef$current","focus","handleInputChange","value","target","handleInputBlur","getMessageType","message","type","getUserLevel","username","hash","split","reduce","acc","char","charCodeAt","generateAvatar","name","colors","colorIndex","className","style","backgroundColor","children","charAt","toUpperCase","fileName","_jsxFileName","lineNumber","columnNumber","formatTypingUsers","stats","size","connectedUsers","onClick","title","disabled","gameState","jackpot","toFixed","ref","onScroll","map","user","isPremium","formattedTime","id","onSubmit","onChange","onBlur","placeholder","maxLength","totalMessages","isRealUser","serverStatus","_c","$RefreshReg$"],"sources":["C:/Users/adams/OneDrive/Desktop/Work/slotpot/src/components/MobileChat.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Send, Users, Wifi, WifiOff, RefreshCw } from 'lucide-react';\nimport useChat from '../hooks/useChat';\nimport './MobileChat.css';\n\nconst MobileChat = () => {\n  const [newMessage, setNewMessage] = useState('');\n  const [showConnectionError, setShowConnectionError] = useState(false);\n  const [isUserScrolling, setIsUserScrolling] = useState(false);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const messagesEndRef = useRef(null);\n  const inputRef = useRef(null);\n  const chatMessagesRef = useRef(null);\n  const scrollTimeoutRef = useRef(null);\n  const lastMessageCountRef = useRef(0);\n\n  const {\n    messages,\n    isConnected,\n    isTyping,\n    typingUsers,\n    connectionError,\n    serverStats,\n    isLoadingStats,\n    sendMessage,\n    handleTyping,\n    reconnect,\n    refreshStats,\n    getChatStats,\n    userInfo\n  } = useChat();\n\n  const scrollToBottom = useCallback((force = false) => {\n    if (chatMessagesRef.current && (!isUserScrolling || force)) {\n      chatMessagesRef.current.scrollTop = chatMessagesRef.current.scrollHeight;\n    }\n  }, [isUserScrolling]);\n\n  const checkIfUserIsAtBottom = () => {\n    if (!chatMessagesRef.current) return true;\n    const { scrollTop, scrollHeight, clientHeight } = chatMessagesRef.current;\n    return scrollHeight - scrollTop - clientHeight < 50;\n  };\n\n  const handleScroll = () => {\n    if (scrollTimeoutRef.current) {\n      clearTimeout(scrollTimeoutRef.current);\n    }\n    \n    setIsUserScrolling(!checkIfUserIsAtBottom());\n    \n    // Clear scrolling state after 3 seconds of no scrolling\n    scrollTimeoutRef.current = setTimeout(() => {\n      setIsUserScrolling(false);\n      scrollTimeoutRef.current = null;\n    }, 3000);\n    \n    // Clear unread count if user scrolls to bottom\n    if (checkIfUserIsAtBottom()) {\n      setUnreadCount(0);\n    }\n  };\n\n  const handleScrollToBottomClick = () => {\n    setUnreadCount(0);\n    setIsUserScrolling(false);\n    scrollToBottom(true);\n  };\n\n  useEffect(() => {\n    // Only auto-scroll for new messages if user hasn't manually scrolled up\n    // and no scroll timeout is active (meaning user isn't currently scrolling)\n    const lastMessage = messages[messages.length - 1];\n    const isOwnMessage = lastMessage?.isOwnMessage;\n    const newMessageAdded = messages.length > lastMessageCountRef.current;\n    \n    if (newMessageAdded && !scrollTimeoutRef.current) {\n      if (isOwnMessage) {\n        // Always scroll to bottom for user's own messages\n        setIsUserScrolling(false);\n        scrollToBottom(true);\n      } else {\n        // Only scroll if user is already at bottom\n        if (!isUserScrolling) {\n          scrollToBottom(false);\n        } else {\n          // Increment unread count if user is scrolled up\n          setUnreadCount(prev => prev + 1);\n        }\n      }\n    }\n    \n    lastMessageCountRef.current = messages.length;\n  }, [messages, isUserScrolling, scrollToBottom]);\n\n  // Reset user scrolling state when they send a message\n  useEffect(() => {\n    if (messages.length > 0 && messages[messages.length - 1]?.isOwnMessage) {\n      setIsUserScrolling(false);\n      setUnreadCount(0);\n    }\n  }, [messages]);\n\n  // Show connection error temporarily\n  useEffect(() => {\n    if (connectionError) {\n      setShowConnectionError(true);\n      const timer = setTimeout(() => setShowConnectionError(false), 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [connectionError]);\n\n  // Cleanup timeout on unmount\n  useEffect(() => {\n    return () => {\n      if (scrollTimeoutRef.current) {\n        clearTimeout(scrollTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  const handleSendMessage = (e) => {\n    e.preventDefault();\n    if (!newMessage.trim() || !isConnected) return;\n\n    const success = sendMessage(newMessage);\n    if (success) {\n      setNewMessage('');\n      setIsUserScrolling(false); // Ensure we scroll to bottom after sending\n      inputRef.current?.focus();\n    }\n  };\n\n  const handleInputChange = (e) => {\n    const value = e.target.value;\n    setNewMessage(value);\n    \n    // Send typing indicator\n    if (value.trim() && !isTyping) {\n      handleTyping(true);\n    } else if (!value.trim() && isTyping) {\n      handleTyping(false);\n    }\n  };\n\n  const handleInputBlur = () => {\n    // Stop typing when input loses focus\n    if (isTyping) {\n      handleTyping(false);\n    }\n  };\n\n  const getMessageType = (message) => {\n    if (message.type === 'system') return 'system';\n    if (message.type === 'bet') return 'bet';\n    if (message.isOwnMessage) return 'own';\n    return 'user';\n  };\n\n  const getUserLevel = (username) => {\n    // Generate consistent level based on username\n    const hash = username.split('').reduce((acc, char) => {\n      return acc + char.charCodeAt(0);\n    }, 0);\n    return (hash % 50) + 1;\n  };\n\n  const generateAvatar = (name) => {\n    const colors = ['#8b5cf6', '#a855f7', '#06b6d4', '#10b981', '#f59e0b', '#ef4444', '#ec4899', '#8b5cf6'];\n    const colorIndex = name.charCodeAt(0) % colors.length;\n    \n    return (\n      <div \n        className=\"generated-avatar-mobile\"\n        style={{ backgroundColor: colors[colorIndex] }}\n      >\n        {name.charAt(0).toUpperCase()}\n      </div>\n    );\n  };\n\n  const formatTypingUsers = () => {\n    if (typingUsers.length === 0) return '';\n    if (typingUsers.length === 1) return `${typingUsers[0]} is typing...`;\n    if (typingUsers.length === 2) return `${typingUsers[0]} and ${typingUsers[1]} are typing...`;\n    return `${typingUsers[0]} and ${typingUsers.length - 1} others are typing...`;\n  };\n\n  const stats = getChatStats();\n\n  return (\n    <div className=\"mobile-chat-container\">\n      {/* Chat Header */}\n      <div className=\"mobile-chat-header\">\n        <div className=\"chat-title-section\">\n          <div className=\"chat-icon\">üí¨</div>\n          <div className=\"chat-info\">\n            <span className=\"chat-title\">Degen Chat</span>\n            <div className=\"chat-status\">\n              <div className={`status-dot ${isConnected ? 'connected' : 'disconnected'}`}>\n                {isConnected ? <Wifi size={8} /> : <WifiOff size={8} />}\n              </div>\n              <span className=\"online-count\">\n                {isLoadingStats ? '...' : serverStats.connectedUsers}\n              </span>\n            </div>\n          </div>\n        </div>\n        <div className=\"mobile-header-controls\">\n          <button \n            onClick={refreshStats} \n            className=\"refresh-btn-mobile\"\n            title=\"Refresh\"\n            disabled={isLoadingStats}\n          >\n            <RefreshCw size={12} className={isLoadingStats ? 'spinning' : ''} />\n          </button>\n          {!isConnected && (\n            <button \n              onClick={reconnect} \n              className=\"reconnect-btn-mobile\"\n              title=\"Reconnect\"\n            >\n              <RefreshCw size={12} />\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Connection Error Banner */}\n      {showConnectionError && (\n        <div className=\"mobile-connection-error\">\n          <span>‚ö†Ô∏è Connection failed. </span>\n          <button onClick={reconnect} className=\"error-reconnect-btn-mobile\">\n            Reconnect\n          </button>\n        </div>\n      )}\n\n      {/* Live Airdrop Section - Using real jackpot data */}\n      <div className=\"live-airdrop-section\">\n        <div className=\"airdrop-header\">\n          <div className=\"live-indicator\">\n            <div className=\"live-dot\"></div>\n            <span>LIVE</span>\n          </div>\n          <div className=\"airdrop-title\">JACKPOT</div>\n        </div>\n        <div className=\"airdrop-amount\">\n          <span className=\"currency-symbol\">‚âà</span>\n          <span className=\"amount\">\n            {serverStats.gameState?.jackpot?.toFixed(3) || '0.000'}\n          </span>\n          <Users size={16} className=\"users-icon\" />\n        </div>\n      </div>\n\n      {/* Chat Messages */}\n      <div className=\"mobile-chat-messages\" ref={chatMessagesRef} onScroll={handleScroll}>\n        {messages.length === 0 && isConnected && (\n          <div className=\"mobile-chat-empty\">\n            <div className=\"chat-icon\">üí¨</div>\n            <p>No messages yet!</p>\n            <small>Start the conversation</small>\n          </div>\n        )}\n\n        {messages.map((message) => (\n          <div key={message.id} className={`mobile-message ${getMessageType(message)}`}>\n            <div className=\"message-avatar\">\n              {generateAvatar(message.username || message.user)}\n            </div>\n            <div className=\"message-content\">\n              <div className=\"message-header\">\n                {message.type === 'system' ? (\n                  <span className=\"username system\">System</span>\n                ) : message.type === 'bet' ? (\n                  <span className=\"username bet\">üé∞ Bet</span>\n                ) : (\n                  <>\n                    <span className=\"username\">{message.username}</span>\n                    <span className=\"user-level\">{getUserLevel(message.username)}</span>\n                    {message.username === userInfo.username && userInfo.isPremium && (\n                      <span className=\"premium-badge-mobile\">‚≠ê</span>\n                    )}\n                  </>\n                )}\n                <span className=\"timestamp\">{message.formattedTime}</span>\n              </div>\n              <div className=\"message-text\">\n                {message.message}\n              </div>\n            </div>\n          </div>\n        ))}\n\n        {/* Typing Indicator */}\n        {typingUsers.length > 0 && (\n          <div className=\"mobile-typing-indicator\">\n            <div className=\"typing-dots-mobile\">\n              <span></span>\n              <span></span>\n              <span></span>\n            </div>\n            <span className=\"typing-text-mobile\">{formatTypingUsers()}</span>\n          </div>\n        )}\n\n        <div ref={messagesEndRef} />\n\n        {/* New Messages Indicator */}\n        {isUserScrolling && unreadCount > 0 && (\n          <button \n            className=\"new-messages-indicator\"\n            onClick={handleScrollToBottomClick}\n          >\n            <span className=\"new-message-count\">{unreadCount}</span>\n            <span className=\"new-message-text\">new message{unreadCount > 1 ? 's' : ''}</span>\n            <span className=\"scroll-down-arrow\">‚Üì</span>\n          </button>\n        )}\n      </div>\n\n      {/* Message Input */}\n      <form className=\"mobile-message-input\" onSubmit={handleSendMessage}>\n        <input\n          ref={inputRef}\n          type=\"text\"\n          value={newMessage}\n          onChange={handleInputChange}\n          onBlur={handleInputBlur}\n          placeholder={isConnected ? \"Type Message Here...\" : \"Connecting...\"}\n          className=\"message-input\"\n          maxLength={500}\n          disabled={!isConnected}\n        />\n        <button \n          type=\"submit\" \n          className=\"send-btn\" \n          disabled={!newMessage.trim() || !isConnected}\n        >\n          <Send size={16} />\n        </button>\n      </form>\n\n      {/* Chat Footer */}\n      <div className=\"mobile-chat-footer\">\n        <div className=\"chat-rules\">\n          <span>üí¨ Chat Rules</span>\n        </div>\n        <div className=\"user-count\">\n          <Users size={12} />\n          <span>{stats.totalMessages}</span>\n        </div>\n        {userInfo.isRealUser && (\n          <div className=\"telegram-badge-mobile\">\n            üì± Telegram\n          </div>\n        )}\n        <div className=\"server-status-mobile\">\n          üåê {serverStats.serverStatus}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MobileChat; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}