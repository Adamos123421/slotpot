{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adams\\\\OneDrive\\\\Desktop\\\\Work\\\\slotpot\\\\src\\\\components\\\\StatsView.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, memo } from 'react';\nimport './PlayerProfile.css';\nimport { backendApi } from '../services/backendApi';\nimport useTonConnect from '../hooks/useTonConnect';\nimport { TonIcon } from './IconComponents';\nimport Leaderboard from './Leaderboard';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst StatsView = ({\n  currentRound\n}) => {\n  _s();\n  var _stats$referralEarnin, _stats$referralCount;\n  const {\n    address,\n    isConnected\n  } = useTonConnect();\n  const [stats, setStats] = useState(null);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    let active = true;\n    async function load() {\n      if (!address) {\n        setStats(null);\n        return;\n      }\n      setLoading(true);\n      try {\n        const data = await backendApi.fetchJson(`/api/stats/player/${encodeURIComponent(address)}`);\n        if (!active) return;\n        setStats(data);\n      } catch (_) {\n        if (!active) return;\n        setStats(null);\n      } finally {\n        if (active) setLoading(false);\n      }\n    }\n    load();\n    const t = setInterval(load, 30000); // Reduced frequency\n    return () => {\n      active = false;\n      clearInterval(t);\n    };\n  }, [address]);\n  const referralEarnings = Number((_stats$referralEarnin = stats === null || stats === void 0 ? void 0 : stats.referralEarnings) !== null && _stats$referralEarnin !== void 0 ? _stats$referralEarnin : 0);\n  const referralCount = Number((_stats$referralCount = stats === null || stats === void 0 ? void 0 : stats.referralCount) !== null && _stats$referralCount !== void 0 ? _stats$referralCount : 0);\n  const referrer = (stats === null || stats === void 0 ? void 0 : stats.referrer) || null;\n  const short = addr => {\n    if (!addr || typeof addr !== 'string') return '';\n    return `${addr.slice(0, 6)}...${addr.slice(-6)}`;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"stats-view\",\n    children: [/*#__PURE__*/_jsxDEV(Leaderboard, {\n      currentRound: currentRound\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), isConnected && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pp-section-header\",\n        style: {\n          marginTop: 16\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pp-section-title\",\n          children: \"Referrals\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pp-summary\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pp-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pp-card-title\",\n            children: \"Referral Earnings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pp-amount pos\",\n            children: [/*#__PURE__*/_jsxDEV(TonIcon, {\n              size: 16,\n              className: \"pp-amount-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: referralEarnings.toFixed(3)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pp-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pp-card-title\",\n            children: \"Referrals\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pp-amount\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: referralCount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 42\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pp-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pp-card-title\",\n          children: \"Your Referrer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pp-referrer\",\n          children: referrer ? short(referrer) : 'â€”'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pp-loading\",\n        children: \"Loading\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 23\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n_s(StatsView, \"/wAX+A5kReUSkyejUIDQQbcSUkc=\", false, function () {\n  return [useTonConnect];\n});\n_c = StatsView;\nexport default _c2 = /*#__PURE__*/memo(StatsView);\nvar _c, _c2;\n$RefreshReg$(_c, \"StatsView\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","useEffect","useState","memo","backendApi","useTonConnect","TonIcon","Leaderboard","jsxDEV","_jsxDEV","Fragment","_Fragment","StatsView","currentRound","_s","_stats$referralEarnin","_stats$referralCount","address","isConnected","stats","setStats","loading","setLoading","active","load","data","fetchJson","encodeURIComponent","_","t","setInterval","clearInterval","referralEarnings","Number","referralCount","referrer","short","addr","slice","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","marginTop","size","toFixed","_c","_c2","$RefreshReg$"],"sources":["C:/Users/adams/OneDrive/Desktop/Work/slotpot/src/components/StatsView.js"],"sourcesContent":["import React, { useEffect, useState, memo } from 'react';\r\nimport './PlayerProfile.css';\r\nimport { backendApi } from '../services/backendApi';\r\nimport useTonConnect from '../hooks/useTonConnect';\r\nimport { TonIcon } from './IconComponents';\r\nimport Leaderboard from './Leaderboard';\r\n\r\nconst StatsView = ({ currentRound }) => {\r\n  const { address, isConnected } = useTonConnect();\r\n  const [stats, setStats] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let active = true;\r\n    async function load() {\r\n      if (!address) {\r\n        setStats(null);\r\n        return;\r\n      }\r\n      setLoading(true);\r\n      try {\r\n        const data = await backendApi.fetchJson(`/api/stats/player/${encodeURIComponent(address)}`);\r\n        if (!active) return;\r\n        setStats(data);\r\n      } catch (_) {\r\n        if (!active) return;\r\n        setStats(null);\r\n      } finally {\r\n        if (active) setLoading(false);\r\n      }\r\n    }\r\n    load();\r\n    const t = setInterval(load, 30000); // Reduced frequency\r\n    return () => { active = false; clearInterval(t); };\r\n  }, [address]);\r\n\r\n  const referralEarnings = Number(stats?.referralEarnings ?? 0);\r\n  const referralCount = Number(stats?.referralCount ?? 0);\r\n  const referrer = stats?.referrer || null;\r\n\r\n  const short = (addr) => {\r\n    if (!addr || typeof addr !== 'string') return '';\r\n    return `${addr.slice(0,6)}...${addr.slice(-6)}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"stats-view\">\r\n      <Leaderboard currentRound={currentRound} />\r\n\r\n      {isConnected && (\r\n        <>\r\n          <div className=\"pp-section-header\" style={{ marginTop: 16 }}>\r\n            <div className=\"pp-section-title\">Referrals</div>\r\n          </div>\r\n          <div className=\"pp-summary\">\r\n            <div className=\"pp-card\">\r\n              <div className=\"pp-card-title\">Referral Earnings</div>\r\n              <div className=\"pp-amount pos\">\r\n                <TonIcon size={16} className=\"pp-amount-icon\" />\r\n                <span>{referralEarnings.toFixed(3)}</span>\r\n              </div>\r\n            </div>\r\n            <div className=\"pp-card\">\r\n              <div className=\"pp-card-title\">Referrals</div>\r\n              <div className=\"pp-amount\"><span>{referralCount}</span></div>\r\n            </div>\r\n          </div>\r\n          <div className=\"pp-card\">\r\n            <div className=\"pp-card-title\">Your Referrer</div>\r\n            <div className=\"pp-referrer\">{referrer ? short(referrer) : 'â€”'}</div>\r\n          </div>\r\n          {loading && <div className=\"pp-loading\">Loadingâ€¦</div>}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(StatsView);\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}