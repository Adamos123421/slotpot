{"ast":null,"code":"import React,{useState,useEffect}from'react';import winnerCoordinator from'../services/winnerCoordinator';import'./WinnerBroadcast.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const WinnerBroadcast=_ref=>{var _winnerBanner$winnerD,_winnerBanner$winnerD2;let{socketService}=_ref;const[winnerBanner,setWinnerBanner]=useState(null);const[isVisible,setIsVisible]=useState(false);useEffect(()=>{if(!socketService)return;// Listen for winner banner notifications\nconst handleWinnerBanner=bannerData=>{var _bannerData$winnerDat,_bannerData$winnerDat2;console.log('üîî Winner banner received:',bannerData);// Check with coordinator if we should show this banner\nif(winnerCoordinator.shouldBlock((_bannerData$winnerDat=bannerData.winnerData)===null||_bannerData$winnerDat===void 0?void 0:_bannerData$winnerDat.timestamp)){console.log('üîÑ WinnerBroadcast: Banner blocked by coordinator');return;}// Inform coordinator that we're showing a winner announcement\nwinnerCoordinator.setActive(true,(_bannerData$winnerDat2=bannerData.winnerData)===null||_bannerData$winnerDat2===void 0?void 0:_bannerData$winnerDat2.timestamp);setWinnerBanner(bannerData);setIsVisible(true);// Auto-hide after specified duration\nsetTimeout(()=>{setIsVisible(false);setTimeout(()=>{setWinnerBanner(null);winnerCoordinator.setActive(false);},500);// Wait for animation\n},bannerData.duration||8000);};socketService.on('notification:banner',handleWinnerBanner);return()=>{socketService.off('notification:banner',handleWinnerBanner);};},[socketService]);if(!winnerBanner)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"winner-broadcast \".concat(isVisible?'visible':''),children:/*#__PURE__*/_jsxs(\"div\",{className:\"winner-broadcast-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"celebration-confetti\",children:[...Array(20)].map((_,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"confetti confetti-\".concat(i%5)},i))}),/*#__PURE__*/_jsx(\"div\",{className:\"winner-header\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"winner-title\",children:winnerBanner.title})}),/*#__PURE__*/_jsxs(\"div\",{className:\"winner-details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"winner-avatar\",children:\"\\uD83C\\uDFC6\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"winner-info\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"winner-name\",children:(_winnerBanner$winnerD=winnerBanner.winnerData)===null||_winnerBanner$winnerD===void 0?void 0:_winnerBanner$winnerD.username}),/*#__PURE__*/_jsxs(\"div\",{className:\"winner-prize\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"prize-amount\",children:(_winnerBanner$winnerD2=winnerBanner.winnerData)===null||_winnerBanner$winnerD2===void 0?void 0:_winnerBanner$winnerD2.prize}),/*#__PURE__*/_jsx(\"span\",{className:\"prize-currency\",children:\"TON\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"winner-message\",children:winnerBanner.message}),/*#__PURE__*/_jsxs(\"div\",{className:\"celebration-effects\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sparkle sparkle-1\",children:\"\\u2728\"}),/*#__PURE__*/_jsx(\"div\",{className:\"sparkle sparkle-2\",children:\"\\uD83C\\uDF89\"}),/*#__PURE__*/_jsx(\"div\",{className:\"sparkle sparkle-3\",children:\"\\uD83C\\uDF8A\"}),/*#__PURE__*/_jsx(\"div\",{className:\"sparkle sparkle-4\",children:\"\\u2728\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:()=>{console.log('üî¥ WinnerBroadcast: Manual close triggered');setIsVisible(false);setTimeout(()=>{setWinnerBanner(null);winnerCoordinator.setActive(false);},500);},children:\"\\xD7\"})]})});};export default WinnerBroadcast;","map":{"version":3,"names":["React","useState","useEffect","winnerCoordinator","jsx","_jsx","jsxs","_jsxs","WinnerBroadcast","_ref","_winnerBanner$winnerD","_winnerBanner$winnerD2","socketService","winnerBanner","setWinnerBanner","isVisible","setIsVisible","handleWinnerBanner","bannerData","_bannerData$winnerDat","_bannerData$winnerDat2","console","log","shouldBlock","winnerData","timestamp","setActive","setTimeout","duration","on","off","className","concat","children","Array","map","_","i","title","username","prize","message","onClick"],"sources":["C:/Users/adams/OneDrive/Desktop/Work/slotpot/src/components/WinnerBroadcast.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport winnerCoordinator from '../services/winnerCoordinator';\r\nimport './WinnerBroadcast.css';\r\n\r\nconst WinnerBroadcast = ({ socketService }) => {\r\n  const [winnerBanner, setWinnerBanner] = useState(null);\r\n  const [isVisible, setIsVisible] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!socketService) return;\r\n\r\n    // Listen for winner banner notifications\r\n    const handleWinnerBanner = (bannerData) => {\r\n      console.log('üîî Winner banner received:', bannerData);\r\n      \r\n      // Check with coordinator if we should show this banner\r\n      if (winnerCoordinator.shouldBlock(bannerData.winnerData?.timestamp)) {\r\n        console.log('üîÑ WinnerBroadcast: Banner blocked by coordinator');\r\n        return;\r\n      }\r\n      \r\n      // Inform coordinator that we're showing a winner announcement\r\n      winnerCoordinator.setActive(true, bannerData.winnerData?.timestamp);\r\n      \r\n      setWinnerBanner(bannerData);\r\n      setIsVisible(true);\r\n\r\n      // Auto-hide after specified duration\r\n      setTimeout(() => {\r\n        setIsVisible(false);\r\n        setTimeout(() => {\r\n          setWinnerBanner(null);\r\n          winnerCoordinator.setActive(false);\r\n        }, 500); // Wait for animation\r\n      }, bannerData.duration || 8000);\r\n    };\r\n\r\n    socketService.on('notification:banner', handleWinnerBanner);\r\n\r\n    return () => {\r\n      socketService.off('notification:banner', handleWinnerBanner);\r\n    };\r\n  }, [socketService]);\r\n\r\n  if (!winnerBanner) return null;\r\n\r\n  return (\r\n    <div className={`winner-broadcast ${isVisible ? 'visible' : ''}`}>\r\n      <div className=\"winner-broadcast-content\">\r\n        <div className=\"celebration-confetti\">\r\n          {[...Array(20)].map((_, i) => (\r\n            <div key={i} className={`confetti confetti-${i % 5}`} />\r\n          ))}\r\n        </div>\r\n        \r\n        <div className=\"winner-header\">\r\n          <h1 className=\"winner-title\">{winnerBanner.title}</h1>\r\n        </div>\r\n        \r\n        <div className=\"winner-details\">\r\n          <div className=\"winner-avatar\">üèÜ</div>\r\n          <div className=\"winner-info\">\r\n            <h2 className=\"winner-name\">{winnerBanner.winnerData?.username}</h2>\r\n            <div className=\"winner-prize\">\r\n              <span className=\"prize-amount\">{winnerBanner.winnerData?.prize}</span>\r\n              <span className=\"prize-currency\">TON</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"winner-message\">\r\n          {winnerBanner.message}\r\n        </div>\r\n        \r\n        <div className=\"celebration-effects\">\r\n          <div className=\"sparkle sparkle-1\">‚ú®</div>\r\n          <div className=\"sparkle sparkle-2\">üéâ</div>\r\n          <div className=\"sparkle sparkle-3\">üéä</div>\r\n          <div className=\"sparkle sparkle-4\">‚ú®</div>\r\n        </div>\r\n        \r\n        <button \r\n          className=\"close-button\"\r\n          onClick={() => {\r\n            console.log('üî¥ WinnerBroadcast: Manual close triggered');\r\n            setIsVisible(false);\r\n            setTimeout(() => {\r\n              setWinnerBanner(null);\r\n              winnerCoordinator.setActive(false);\r\n            }, 500);\r\n          }}\r\n        >\r\n          √ó\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WinnerBroadcast; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}