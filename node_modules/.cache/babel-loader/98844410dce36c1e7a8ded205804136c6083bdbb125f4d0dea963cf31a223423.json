{"ast":null,"code":"\"use strict\";\n\n/**\n * Copyright (c) Whales Corp.\n * All Rights Reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WalletContractV4 = void 0;\nconst core_1 = require(\"@ton/core\");\nconst createWalletTransfer_1 = require(\"./signing/createWalletTransfer\");\nclass WalletContractV4 {\n  static create(args) {\n    return new WalletContractV4(args.workchain, args.publicKey, args.walletId);\n  }\n  constructor(workchain, publicKey, walletId) {\n    // Resolve parameters\n    this.workchain = workchain;\n    this.publicKey = publicKey;\n    if (walletId !== null && walletId !== undefined) {\n      this.walletId = walletId;\n    } else {\n      this.walletId = 698983191 + workchain;\n    }\n    // Build initial code and data\n    let code = core_1.Cell.fromBoc(Buffer.from('te6ccgECFAEAAtQAART/APSkE/S88sgLAQIBIAIDAgFIBAUE+PKDCNcYINMf0x/THwL4I7vyZO1E0NMf0x/T//QE0VFDuvKhUVG68qIF+QFUEGT5EPKj+AAkpMjLH1JAyx9SMMv/UhD0AMntVPgPAdMHIcAAn2xRkyDXSpbTB9QC+wDoMOAhwAHjACHAAuMAAcADkTDjDQOkyMsfEssfy/8QERITAubQAdDTAyFxsJJfBOAi10nBIJJfBOAC0x8hghBwbHVnvSKCEGRzdHK9sJJfBeAD+kAwIPpEAcjKB8v/ydDtRNCBAUDXIfQEMFyBAQj0Cm+hMbOSXwfgBdM/yCWCEHBsdWe6kjgw4w0DghBkc3RyupJfBuMNBgcCASAICQB4AfoA9AQw+CdvIjBQCqEhvvLgUIIQcGx1Z4MesXCAGFAEywUmzxZY+gIZ9ADLaRfLH1Jgyz8gyYBA+wAGAIpQBIEBCPRZMO1E0IEBQNcgyAHPFvQAye1UAXKwjiOCEGRzdHKDHrFwgBhQBcsFUAPPFiP6AhPLassfyz/JgED7AJJfA+ICASAKCwBZvSQrb2omhAgKBrkPoCGEcNQICEekk30pkQzmkD6f+YN4EoAbeBAUiYcVnzGEAgFYDA0AEbjJftRNDXCx+AA9sp37UTQgQFA1yH0BDACyMoHy//J0AGBAQj0Cm+hMYAIBIA4PABmtznaiaEAga5Drhf/AABmvHfaiaEAQa5DrhY/AAG7SB/oA1NQi+QAFyMoHFcv/ydB3dIAYyMsFywIizxZQBfoCFMtrEszMyXP7AMhAFIEBCPRR8qcCAHCBAQjXGPoA0z/IVCBHgQEI9FHyp4IQbm90ZXB0gBjIywXLAlAGzxZQBPoCFMtqEssfyz/Jc/sAAgBsgQEI1xj6ANM/MFIkgQEI9Fnyp4IQZHN0cnB0gBjIywXLAlAFzxZQA/oCE8tqyx8Syz/Jc/sAAAr0AMntVA==', 'base64'))[0];\n    let data = (0, core_1.beginCell)().storeUint(0, 32) // Seqno\n    .storeUint(this.walletId, 32).storeBuffer(this.publicKey).storeBit(0) // Empty plugins dict\n    .endCell();\n    this.init = {\n      code,\n      data\n    };\n    this.address = (0, core_1.contractAddress)(workchain, {\n      code,\n      data\n    });\n  }\n  /**\n   * Get Wallet Balance\n   */\n  async getBalance(provider) {\n    let state = await provider.getState();\n    return state.balance;\n  }\n  /**\n   * Get Wallet Seqno\n   */\n  async getSeqno(provider) {\n    let state = await provider.getState();\n    if (state.state.type === 'active') {\n      let res = await provider.get('seqno', []);\n      return res.stack.readNumber();\n    } else {\n      return 0;\n    }\n  }\n  /**\n   * Send signed transfer\n   */\n  async send(provider, message) {\n    await provider.external(message);\n  }\n  /**\n   * Sign and send transfer\n   */\n  async sendTransfer(provider, args) {\n    let transfer = this.createTransfer(args);\n    await this.send(provider, transfer);\n  }\n  /**\n   * Create signed transfer\n   */\n  createTransfer(args) {\n    let sendMode = core_1.SendMode.PAY_GAS_SEPARATELY;\n    if (args.sendMode !== null && args.sendMode !== undefined) {\n      sendMode = args.sendMode;\n    }\n    return (0, createWalletTransfer_1.createWalletTransferV4)({\n      seqno: args.seqno,\n      sendMode,\n      secretKey: args.secretKey,\n      messages: args.messages,\n      timeout: args.timeout,\n      walletId: this.walletId\n    });\n  }\n  /**\n   * Create sender\n   */\n  sender(provider, secretKey) {\n    return {\n      send: async args => {\n        let seqno = await this.getSeqno(provider);\n        let transfer = this.createTransfer({\n          seqno,\n          secretKey,\n          sendMode: args.sendMode,\n          messages: [(0, core_1.internal)({\n            to: args.to,\n            value: args.value,\n            init: args.init,\n            body: args.body,\n            bounce: args.bounce\n          })]\n        });\n        await this.send(provider, transfer);\n      }\n    };\n  }\n}\nexports.WalletContractV4 = WalletContractV4;","map":{"version":3,"names":["Object","defineProperty","exports","value","WalletContractV4","core_1","require","createWalletTransfer_1","create","args","workchain","publicKey","walletId","constructor","undefined","code","Cell","fromBoc","Buffer","from","data","beginCell","storeUint","storeBuffer","storeBit","endCell","init","address","contractAddress","getBalance","provider","state","getState","balance","getSeqno","type","res","get","stack","readNumber","send","message","external","sendTransfer","transfer","createTransfer","sendMode","SendMode","PAY_GAS_SEPARATELY","createWalletTransferV4","seqno","secretKey","messages","timeout","sender","internal","to","body","bounce"],"sources":["C:/Users/adams/Downloads/GLL/slotpot/node_modules/@ton/ton/dist/wallets/WalletContractV4.js"],"sourcesContent":["\"use strict\";\n/**\n * Copyright (c) Whales Corp.\n * All Rights Reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletContractV4 = void 0;\nconst core_1 = require(\"@ton/core\");\nconst createWalletTransfer_1 = require(\"./signing/createWalletTransfer\");\nclass WalletContractV4 {\n    static create(args) {\n        return new WalletContractV4(args.workchain, args.publicKey, args.walletId);\n    }\n    constructor(workchain, publicKey, walletId) {\n        // Resolve parameters\n        this.workchain = workchain;\n        this.publicKey = publicKey;\n        if (walletId !== null && walletId !== undefined) {\n            this.walletId = walletId;\n        }\n        else {\n            this.walletId = 698983191 + workchain;\n        }\n        // Build initial code and data\n        let code = core_1.Cell.fromBoc(Buffer.from('te6ccgECFAEAAtQAART/APSkE/S88sgLAQIBIAIDAgFIBAUE+PKDCNcYINMf0x/THwL4I7vyZO1E0NMf0x/T//QE0VFDuvKhUVG68qIF+QFUEGT5EPKj+AAkpMjLH1JAyx9SMMv/UhD0AMntVPgPAdMHIcAAn2xRkyDXSpbTB9QC+wDoMOAhwAHjACHAAuMAAcADkTDjDQOkyMsfEssfy/8QERITAubQAdDTAyFxsJJfBOAi10nBIJJfBOAC0x8hghBwbHVnvSKCEGRzdHK9sJJfBeAD+kAwIPpEAcjKB8v/ydDtRNCBAUDXIfQEMFyBAQj0Cm+hMbOSXwfgBdM/yCWCEHBsdWe6kjgw4w0DghBkc3RyupJfBuMNBgcCASAICQB4AfoA9AQw+CdvIjBQCqEhvvLgUIIQcGx1Z4MesXCAGFAEywUmzxZY+gIZ9ADLaRfLH1Jgyz8gyYBA+wAGAIpQBIEBCPRZMO1E0IEBQNcgyAHPFvQAye1UAXKwjiOCEGRzdHKDHrFwgBhQBcsFUAPPFiP6AhPLassfyz/JgED7AJJfA+ICASAKCwBZvSQrb2omhAgKBrkPoCGEcNQICEekk30pkQzmkD6f+YN4EoAbeBAUiYcVnzGEAgFYDA0AEbjJftRNDXCx+AA9sp37UTQgQFA1yH0BDACyMoHy//J0AGBAQj0Cm+hMYAIBIA4PABmtznaiaEAga5Drhf/AABmvHfaiaEAQa5DrhY/AAG7SB/oA1NQi+QAFyMoHFcv/ydB3dIAYyMsFywIizxZQBfoCFMtrEszMyXP7AMhAFIEBCPRR8qcCAHCBAQjXGPoA0z/IVCBHgQEI9FHyp4IQbm90ZXB0gBjIywXLAlAGzxZQBPoCFMtqEssfyz/Jc/sAAgBsgQEI1xj6ANM/MFIkgQEI9Fnyp4IQZHN0cnB0gBjIywXLAlAFzxZQA/oCE8tqyx8Syz/Jc/sAAAr0AMntVA==', 'base64'))[0];\n        let data = (0, core_1.beginCell)()\n            .storeUint(0, 32) // Seqno\n            .storeUint(this.walletId, 32)\n            .storeBuffer(this.publicKey)\n            .storeBit(0) // Empty plugins dict\n            .endCell();\n        this.init = { code, data };\n        this.address = (0, core_1.contractAddress)(workchain, { code, data });\n    }\n    /**\n     * Get Wallet Balance\n     */\n    async getBalance(provider) {\n        let state = await provider.getState();\n        return state.balance;\n    }\n    /**\n     * Get Wallet Seqno\n     */\n    async getSeqno(provider) {\n        let state = await provider.getState();\n        if (state.state.type === 'active') {\n            let res = await provider.get('seqno', []);\n            return res.stack.readNumber();\n        }\n        else {\n            return 0;\n        }\n    }\n    /**\n     * Send signed transfer\n     */\n    async send(provider, message) {\n        await provider.external(message);\n    }\n    /**\n     * Sign and send transfer\n     */\n    async sendTransfer(provider, args) {\n        let transfer = this.createTransfer(args);\n        await this.send(provider, transfer);\n    }\n    /**\n     * Create signed transfer\n     */\n    createTransfer(args) {\n        let sendMode = core_1.SendMode.PAY_GAS_SEPARATELY;\n        if (args.sendMode !== null && args.sendMode !== undefined) {\n            sendMode = args.sendMode;\n        }\n        return (0, createWalletTransfer_1.createWalletTransferV4)({\n            seqno: args.seqno,\n            sendMode,\n            secretKey: args.secretKey,\n            messages: args.messages,\n            timeout: args.timeout,\n            walletId: this.walletId\n        });\n    }\n    /**\n     * Create sender\n     */\n    sender(provider, secretKey) {\n        return {\n            send: async (args) => {\n                let seqno = await this.getSeqno(provider);\n                let transfer = this.createTransfer({\n                    seqno,\n                    secretKey,\n                    sendMode: args.sendMode,\n                    messages: [(0, core_1.internal)({\n                            to: args.to,\n                            value: args.value,\n                            init: args.init,\n                            body: args.body,\n                            bounce: args.bounce\n                        })]\n                });\n                await this.send(provider, transfer);\n            }\n        };\n    }\n}\nexports.WalletContractV4 = WalletContractV4;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}