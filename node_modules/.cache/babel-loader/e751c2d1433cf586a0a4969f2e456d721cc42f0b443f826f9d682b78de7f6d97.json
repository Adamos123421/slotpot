{"ast":null,"code":"\"use strict\";\n\n/**\n * Copyright (c) Whales Corp.\n * All Rights Reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WalletContractV3R1 = void 0;\nconst core_1 = require(\"@ton/core\");\nconst createWalletTransfer_1 = require(\"./signing/createWalletTransfer\");\nclass WalletContractV3R1 {\n  static create(args) {\n    return new WalletContractV3R1(args.workchain, args.publicKey, args.walletId);\n  }\n  constructor(workchain, publicKey, walletId) {\n    // Resolve parameters\n    this.workchain = workchain;\n    this.publicKey = publicKey;\n    if (walletId !== null && walletId !== undefined) {\n      this.walletId = walletId;\n    } else {\n      this.walletId = 698983191 + workchain;\n    }\n    // Build initial code and data\n    let code = core_1.Cell.fromBoc(Buffer.from('te6cckEBAQEAYgAAwP8AIN0gggFMl7qXMO1E0NcLH+Ck8mCDCNcYINMf0x/TH/gjE7vyY+1E0NMf0x/T/9FRMrryoVFEuvKiBPkBVBBV+RDyo/gAkyDXSpbTB9QC+wDo0QGkyMsfyx/L/8ntVD++buA=', 'base64'))[0];\n    let data = (0, core_1.beginCell)().storeUint(0, 32) // Seqno\n    .storeUint(this.walletId, 32).storeBuffer(publicKey).endCell();\n    this.init = {\n      code,\n      data\n    };\n    this.address = (0, core_1.contractAddress)(workchain, {\n      code,\n      data\n    });\n  }\n  /**\n   * Get wallet balance\n   */\n  async getBalance(provider) {\n    let state = await provider.getState();\n    return state.balance;\n  }\n  /**\n   * Get Wallet Seqno\n   */\n  async getSeqno(provider) {\n    let state = await provider.getState();\n    if (state.state.type === 'active') {\n      let res = await provider.get('seqno', []);\n      return res.stack.readNumber();\n    } else {\n      return 0;\n    }\n  }\n  /**\n   * Send signed transfer\n   */\n  async send(provider, message) {\n    await provider.external(message);\n  }\n  /**\n   * Sign and send transfer\n   */\n  async sendTransfer(provider, args) {\n    let transfer = this.createTransfer(args);\n    await this.send(provider, transfer);\n  }\n  /**\n   * Create transfer\n   */\n  createTransfer(args) {\n    let sendMode = core_1.SendMode.PAY_GAS_SEPARATELY;\n    if (args.sendMode !== null && args.sendMode !== undefined) {\n      sendMode = args.sendMode;\n    }\n    return (0, createWalletTransfer_1.createWalletTransferV3)({\n      seqno: args.seqno,\n      sendMode,\n      secretKey: args.secretKey,\n      messages: args.messages,\n      timeout: args.timeout,\n      walletId: this.walletId\n    });\n  }\n  /**\n   * Create sender\n   */\n  sender(provider, secretKey) {\n    return {\n      send: async args => {\n        let seqno = await this.getSeqno(provider);\n        let transfer = this.createTransfer({\n          seqno,\n          secretKey,\n          sendMode: args.sendMode,\n          messages: [(0, core_1.internal)({\n            to: args.to,\n            value: args.value,\n            init: args.init,\n            body: args.body,\n            bounce: args.bounce\n          })]\n        });\n        await this.send(provider, transfer);\n      }\n    };\n  }\n}\nexports.WalletContractV3R1 = WalletContractV3R1;","map":{"version":3,"names":["Object","defineProperty","exports","value","WalletContractV3R1","core_1","require","createWalletTransfer_1","create","args","workchain","publicKey","walletId","constructor","undefined","code","Cell","fromBoc","Buffer","from","data","beginCell","storeUint","storeBuffer","endCell","init","address","contractAddress","getBalance","provider","state","getState","balance","getSeqno","type","res","get","stack","readNumber","send","message","external","sendTransfer","transfer","createTransfer","sendMode","SendMode","PAY_GAS_SEPARATELY","createWalletTransferV3","seqno","secretKey","messages","timeout","sender","internal","to","body","bounce"],"sources":["C:/Users/adams/Downloads/GLL/slotpot/node_modules/@ton/ton/dist/wallets/WalletContractV3R1.js"],"sourcesContent":["\"use strict\";\n/**\n * Copyright (c) Whales Corp.\n * All Rights Reserved.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletContractV3R1 = void 0;\nconst core_1 = require(\"@ton/core\");\nconst createWalletTransfer_1 = require(\"./signing/createWalletTransfer\");\nclass WalletContractV3R1 {\n    static create(args) {\n        return new WalletContractV3R1(args.workchain, args.publicKey, args.walletId);\n    }\n    constructor(workchain, publicKey, walletId) {\n        // Resolve parameters\n        this.workchain = workchain;\n        this.publicKey = publicKey;\n        if (walletId !== null && walletId !== undefined) {\n            this.walletId = walletId;\n        }\n        else {\n            this.walletId = 698983191 + workchain;\n        }\n        // Build initial code and data\n        let code = core_1.Cell.fromBoc(Buffer.from('te6cckEBAQEAYgAAwP8AIN0gggFMl7qXMO1E0NcLH+Ck8mCDCNcYINMf0x/TH/gjE7vyY+1E0NMf0x/T/9FRMrryoVFEuvKiBPkBVBBV+RDyo/gAkyDXSpbTB9QC+wDo0QGkyMsfyx/L/8ntVD++buA=', 'base64'))[0];\n        let data = (0, core_1.beginCell)()\n            .storeUint(0, 32) // Seqno\n            .storeUint(this.walletId, 32)\n            .storeBuffer(publicKey)\n            .endCell();\n        this.init = { code, data };\n        this.address = (0, core_1.contractAddress)(workchain, { code, data });\n    }\n    /**\n     * Get wallet balance\n     */\n    async getBalance(provider) {\n        let state = await provider.getState();\n        return state.balance;\n    }\n    /**\n     * Get Wallet Seqno\n     */\n    async getSeqno(provider) {\n        let state = await provider.getState();\n        if (state.state.type === 'active') {\n            let res = await provider.get('seqno', []);\n            return res.stack.readNumber();\n        }\n        else {\n            return 0;\n        }\n    }\n    /**\n     * Send signed transfer\n     */\n    async send(provider, message) {\n        await provider.external(message);\n    }\n    /**\n     * Sign and send transfer\n     */\n    async sendTransfer(provider, args) {\n        let transfer = this.createTransfer(args);\n        await this.send(provider, transfer);\n    }\n    /**\n     * Create transfer\n     */\n    createTransfer(args) {\n        let sendMode = core_1.SendMode.PAY_GAS_SEPARATELY;\n        if (args.sendMode !== null && args.sendMode !== undefined) {\n            sendMode = args.sendMode;\n        }\n        return (0, createWalletTransfer_1.createWalletTransferV3)({\n            seqno: args.seqno,\n            sendMode,\n            secretKey: args.secretKey,\n            messages: args.messages,\n            timeout: args.timeout,\n            walletId: this.walletId\n        });\n    }\n    /**\n     * Create sender\n     */\n    sender(provider, secretKey) {\n        return {\n            send: async (args) => {\n                let seqno = await this.getSeqno(provider);\n                let transfer = this.createTransfer({\n                    seqno,\n                    secretKey,\n                    sendMode: args.sendMode,\n                    messages: [(0, core_1.internal)({\n                            to: args.to,\n                            value: args.value,\n                            init: args.init,\n                            body: args.body,\n                            bounce: args.bounce\n                        })]\n                });\n                await this.send(provider, transfer);\n            }\n        };\n    }\n}\nexports.WalletContractV3R1 = WalletContractV3R1;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}