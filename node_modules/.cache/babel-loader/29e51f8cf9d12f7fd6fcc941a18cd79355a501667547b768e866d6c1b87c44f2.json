{"ast":null,"code":"import { io } from 'socket.io-client';\nclass SocketService {\n  constructor() {\n    this.socket = null;\n    this.eventHandlers = new Map();\n    this.isConnected = false;\n    this.reconnectAttempts = 0;\n    this.maxReconnectAttempts = 5;\n    this.gameState = {\n      isWaitingForWinner: false,\n      currentRound: null,\n      timeRemaining: null,\n      lastWinner: null,\n      jackpotValue: 0,\n      bettors: []\n    };\n  }\n  connect() {\n    var _this$socket, _this$socket2;\n    // Prevent multiple connections - return if already connected or connecting\n    if ((_this$socket = this.socket) !== null && _this$socket !== void 0 && _this$socket.connected || (_this$socket2 = this.socket) !== null && _this$socket2 !== void 0 && _this$socket2.connecting) {\n      console.log('ðŸ”Œ Socket already connected/connecting, skipping duplicate connection');\n      return;\n    }\n    const socketUrl = \"http://localhost:5002\";\n    console.log('ðŸ”Œ Creating new socket connection to:', socketUrl);\n    this.socket = io(socketUrl, {\n      reconnection: true,\n      reconnectionDelay: 1000,\n      reconnectionDelayMax: 5000,\n      reconnectionAttempts: this.maxReconnectAttempts,\n      transports: ['websocket'],\n      withCredentials: true\n    });\n    this.setupEventHandlers();\n  }\n  setupEventHandlers() {\n    if (!this.socket) return;\n    this.socket.on('connect', () => {\n      console.log('ðŸ”Œ Connected to socket server');\n      this.isConnected = true;\n      this.reconnectAttempts = 0;\n\n      // Request current game state on connect (with null check)\n      if (this.socket && this.socket.connected) {\n        this.socket.emit('getGameState');\n      }\n    });\n    this.socket.on('disconnect', () => {\n      console.log('ðŸ”Œ Disconnected from socket server');\n      this.isConnected = false;\n    });\n    this.socket.on('connect_error', error => {\n      console.log('ðŸš« Connection error:', error);\n      this.reconnectAttempts++;\n      if (this.reconnectAttempts >= this.maxReconnectAttempts) {\n        console.log('âŒ Max reconnection attempts reached');\n        this.socket.disconnect();\n      }\n    });\n\n    // Game specific events\n    this.socket.on('gameState', data => {\n      console.log('ðŸŽ® Received game state:', data);\n      this.gameState = {\n        ...this.gameState,\n        ...data\n      };\n\n      // If joining when timer is 0 and no winner yet, show waiting state\n      if (data.timeRemaining === 0 && !data.lastWinner) {\n        console.log('â° User joined during winner selection - showing waiting state');\n        this.gameState.isWaitingForWinner = true;\n        this.emit('waitingForWinner', true);\n      }\n      this.emit('gameState', this.gameState);\n    });\n    this.socket.on('winner', data => {\n      console.log('ðŸ† Winner announced:', data);\n      this.gameState.lastWinner = data;\n      this.gameState.isWaitingForWinner = false;\n      this.emit('winner', data);\n    });\n\n    // Handle direct winner announcements (reliable delivery)\n    this.socket.on('winnerAnnouncement', data => {\n      console.log('ðŸŽ¯ Direct winner announcement received:', data);\n      this.gameState.lastWinner = data;\n      this.gameState.isWaitingForWinner = false;\n      this.gameState.winnerAnnouncement = data;\n      this.emit('winnerAnnouncement', data);\n    });\n    this.socket.on('newBet', data => {\n      console.log('ðŸ’° New bet received:', data);\n      // Update local game state with new bet\n      if (!this.gameState.bettors.find(b => b.address === data.address)) {\n        this.gameState.bettors.push(data);\n      }\n      this.gameState.jackpotValue += parseFloat(data.amount) - 0.5; // Account for fee\n      this.emit('newBet', data);\n    });\n    this.socket.on('timer', data => {\n      console.log('â° Timer update:', data);\n\n      // SAFETY: Ensure data exists and has required properties\n      if (!data || typeof data !== 'object') {\n        console.warn('âš ï¸ Invalid timer data received:', data);\n        return;\n      }\n\n      // Extract timer properties safely\n      const timeRemaining = typeof data.timeRemaining === 'number' ? data.timeRemaining : 0;\n      const roundNumber = typeof data.roundNumber === 'number' ? data.roundNumber : this.gameState.currentRound;\n      this.gameState.timeRemaining = timeRemaining;\n      this.gameState.currentRound = roundNumber;\n\n      // If timer hits 0 and we weren't already waiting, set waiting state\n      if (timeRemaining === 0 && !this.gameState.isWaitingForWinner) {\n        console.log('â° Timer ended - setting waiting for winner state');\n        this.gameState.isWaitingForWinner = true;\n        this.emit('waitingForWinner', true);\n      }\n\n      // Emit with safe data structure\n      this.emit('timer', {\n        timeRemaining,\n        roundNumber,\n        timeElapsed: typeof data.timeElapsed === 'number' ? data.timeElapsed : 0,\n        isActive: Boolean(data.isActive)\n      });\n    });\n\n    // Handle round reset\n    this.socket.on('roundReset', data => {\n      console.log('ðŸ”„ Round reset:', data);\n\n      // SAFETY: Ensure data exists\n      const resetData = data || {};\n      const timeRemaining = typeof resetData.timeRemaining === 'number' ? resetData.timeRemaining : 30;\n      const roundNumber = typeof resetData.roundNumber === 'number' ? resetData.roundNumber : this.gameState.currentRound;\n      this.gameState = {\n        ...this.gameState,\n        isWaitingForWinner: false,\n        bettors: [],\n        jackpotValue: 0,\n        lastWinner: null,\n        timeRemaining,\n        currentRound: roundNumber\n      };\n      this.emit('roundReset', {\n        timeRemaining,\n        roundNumber,\n        message: resetData.message || 'Round reset'\n      });\n    });\n\n    // Handle new round start\n    this.socket.on('newRound', data => {\n      console.log('ðŸŽ° New round started:', data);\n\n      // SAFETY: Ensure data exists and has required properties\n      if (!data || typeof data !== 'object') {\n        console.warn('âš ï¸ Invalid newRound data received:', data);\n        return;\n      }\n      const timeRemaining = typeof data.timeRemaining === 'number' ? data.timeRemaining : 30;\n      const roundNumber = typeof data.roundNumber === 'number' ? data.roundNumber : this.gameState.currentRound + 1;\n      this.gameState = {\n        ...this.gameState,\n        isWaitingForWinner: false,\n        isPostWinnerLoading: false,\n        bettors: [],\n        jackpotValue: 0,\n        lastWinner: null,\n        currentRound: roundNumber,\n        timeRemaining: timeRemaining\n      };\n      this.emit('newRound', {\n        roundNumber,\n        timeRemaining,\n        isActive: true\n      });\n      this.emit('gameState', this.gameState);\n    });\n\n    // Handle comprehensive game data updates\n    this.socket.on('fullGameUpdate', data => {\n      console.log('ðŸŽ® Full game data update:', data);\n      this.gameState = {\n        ...this.gameState,\n        ...data\n      };\n      this.emit('fullGameUpdate', data);\n      this.emit('gameState', this.gameState);\n    });\n\n    // Handle legacy bettors update for backwards compatibility\n    this.socket.on('bettorsUpdate', data => {\n      console.log('ðŸ’° Bettors update:', data);\n      this.gameState.bettors = data.bettors || [];\n      this.gameState.jackpotValue = data.totalPot || 0;\n      this.gameState.betCount = data.betCount || 0;\n      this.emit('bettorsUpdate', data);\n      this.emit('gameState', this.gameState);\n    });\n  }\n  on(event, callback) {\n    if (!this.eventHandlers.has(event)) {\n      this.eventHandlers.set(event, new Set());\n    }\n    const handlers = this.eventHandlers.get(event);\n\n    // Prevent duplicate handlers\n    if (handlers.has(callback)) {\n      console.warn(`ðŸ”Œ Duplicate listener for '${event}' event prevented`);\n      return;\n    }\n    handlers.add(callback);\n    console.log(`ðŸ”Œ Added listener for '${event}' event (${handlers.size} total)`);\n  }\n  off(event, callback) {\n    const handlers = this.eventHandlers.get(event);\n    if (handlers) {\n      const wasDeleted = handlers.delete(callback);\n      if (wasDeleted) {\n        console.log(`ðŸ”Œ Removed listener for '${event}' event (${handlers.size} remaining)`);\n      }\n    }\n  }\n  emit(event, data) {\n    const handlers = this.eventHandlers.get(event);\n    if (handlers) {\n      handlers.forEach(handler => {\n        try {\n          handler(data);\n        } catch (error) {\n          console.error(`ðŸš« Error in ${event} handler:`, error);\n          console.error('Data that caused error:', data);\n        }\n      });\n    }\n  }\n  placeBet(betData) {\n    var _this$socket3;\n    if (!((_this$socket3 = this.socket) !== null && _this$socket3 !== void 0 && _this$socket3.connected)) {\n      console.error('Cannot place bet: Socket not connected');\n      return;\n    }\n    this.socket.emit('placeBet', betData);\n  }\n  disconnect() {\n    if (this.socket) {\n      this.socket.disconnect();\n      this.socket = null;\n      this.isConnected = false;\n    }\n  }\n  reconnect() {\n    this.disconnect();\n    this.connect();\n  }\n  getGameState() {\n    return this.gameState;\n  }\n  isWaitingForWinner() {\n    return this.gameState.isWaitingForWinner;\n  }\n  isPostWinnerLoading() {\n    return this.gameState.isPostWinnerLoading || false;\n  }\n  getCurrentRound() {\n    return this.gameState.currentRound;\n  }\n}\n\n// Create singleton instance\nconst socketService = new SocketService();\nexport default socketService;","map":{"version":3,"names":["io","SocketService","constructor","socket","eventHandlers","Map","isConnected","reconnectAttempts","maxReconnectAttempts","gameState","isWaitingForWinner","currentRound","timeRemaining","lastWinner","jackpotValue","bettors","connect","_this$socket","_this$socket2","connected","connecting","console","log","socketUrl","reconnection","reconnectionDelay","reconnectionDelayMax","reconnectionAttempts","transports","withCredentials","setupEventHandlers","on","emit","error","disconnect","data","winnerAnnouncement","find","b","address","push","parseFloat","amount","warn","roundNumber","timeElapsed","isActive","Boolean","resetData","message","isPostWinnerLoading","totalPot","betCount","event","callback","has","set","Set","handlers","get","add","size","off","wasDeleted","delete","forEach","handler","placeBet","betData","_this$socket3","reconnect","getGameState","getCurrentRound","socketService"],"sources":["C:/Users/adams/OneDrive/Desktop/Work/slotpot/src/services/socketService.js"],"sourcesContent":["import { io } from 'socket.io-client';\r\n\r\nclass SocketService {\r\n  constructor() {\r\n    this.socket = null;\r\n    this.eventHandlers = new Map();\r\n    this.isConnected = false;\r\n    this.reconnectAttempts = 0;\r\n    this.maxReconnectAttempts = 5;\r\n    this.gameState = {\r\n      isWaitingForWinner: false,\r\n      currentRound: null,\r\n      timeRemaining: null,\r\n      lastWinner: null,\r\n      jackpotValue: 0,\r\n      bettors: []\r\n    };\r\n  }\r\n\r\n  connect() {\r\n    // Prevent multiple connections - return if already connected or connecting\r\n    if (this.socket?.connected || this.socket?.connecting) {\r\n      console.log('ðŸ”Œ Socket already connected/connecting, skipping duplicate connection');\r\n      return;\r\n    }\r\n\r\n    const socketUrl = \"http://localhost:5002\";\r\n    \r\n    console.log('ðŸ”Œ Creating new socket connection to:', socketUrl);\r\n    this.socket = io(socketUrl, {\r\n      reconnection: true,\r\n      reconnectionDelay: 1000,\r\n      reconnectionDelayMax: 5000,\r\n      reconnectionAttempts: this.maxReconnectAttempts,\r\n      transports: ['websocket'],\r\n      withCredentials: true\r\n    });\r\n\r\n    this.setupEventHandlers();\r\n  }\r\n\r\n  setupEventHandlers() {\r\n    if (!this.socket) return;\r\n\r\n    this.socket.on('connect', () => {\r\n      console.log('ðŸ”Œ Connected to socket server');\r\n      this.isConnected = true;\r\n      this.reconnectAttempts = 0;\r\n      \r\n      // Request current game state on connect (with null check)\r\n      if (this.socket && this.socket.connected) {\r\n        this.socket.emit('getGameState');\r\n      }\r\n    });\r\n\r\n    this.socket.on('disconnect', () => {\r\n      console.log('ðŸ”Œ Disconnected from socket server');\r\n      this.isConnected = false;\r\n    });\r\n\r\n    this.socket.on('connect_error', (error) => {\r\n      console.log('ðŸš« Connection error:', error);\r\n      this.reconnectAttempts++;\r\n      \r\n      if (this.reconnectAttempts >= this.maxReconnectAttempts) {\r\n        console.log('âŒ Max reconnection attempts reached');\r\n        this.socket.disconnect();\r\n      }\r\n    });\r\n\r\n    // Game specific events\r\n    this.socket.on('gameState', (data) => {\r\n      console.log('ðŸŽ® Received game state:', data);\r\n      \r\n      this.gameState = {\r\n        ...this.gameState,\r\n        ...data\r\n      };\r\n      \r\n      // If joining when timer is 0 and no winner yet, show waiting state\r\n      if (data.timeRemaining === 0 && !data.lastWinner) {\r\n        console.log('â° User joined during winner selection - showing waiting state');\r\n        this.gameState.isWaitingForWinner = true;\r\n        this.emit('waitingForWinner', true);\r\n      }\r\n      \r\n      this.emit('gameState', this.gameState);\r\n    });\r\n\r\n    this.socket.on('winner', (data) => {\r\n      console.log('ðŸ† Winner announced:', data);\r\n      this.gameState.lastWinner = data;\r\n      this.gameState.isWaitingForWinner = false;\r\n      this.emit('winner', data);\r\n    });\r\n\r\n    // Handle direct winner announcements (reliable delivery)\r\n    this.socket.on('winnerAnnouncement', (data) => {\r\n      console.log('ðŸŽ¯ Direct winner announcement received:', data);\r\n      this.gameState.lastWinner = data;\r\n      this.gameState.isWaitingForWinner = false;\r\n      this.gameState.winnerAnnouncement = data;\r\n      this.emit('winnerAnnouncement', data);\r\n    });\r\n\r\n    this.socket.on('newBet', (data) => {\r\n      console.log('ðŸ’° New bet received:', data);\r\n      // Update local game state with new bet\r\n      if (!this.gameState.bettors.find(b => b.address === data.address)) {\r\n        this.gameState.bettors.push(data);\r\n      }\r\n      this.gameState.jackpotValue += (parseFloat(data.amount) - 0.5); // Account for fee\r\n      this.emit('newBet', data);\r\n    });\r\n\r\n    this.socket.on('timer', (data) => {\r\n      console.log('â° Timer update:', data);\r\n      \r\n      // SAFETY: Ensure data exists and has required properties\r\n      if (!data || typeof data !== 'object') {\r\n        console.warn('âš ï¸ Invalid timer data received:', data);\r\n        return;\r\n      }\r\n      \r\n      // Extract timer properties safely\r\n      const timeRemaining = typeof data.timeRemaining === 'number' ? data.timeRemaining : 0;\r\n      const roundNumber = typeof data.roundNumber === 'number' ? data.roundNumber : this.gameState.currentRound;\r\n      \r\n      this.gameState.timeRemaining = timeRemaining;\r\n      this.gameState.currentRound = roundNumber;\r\n      \r\n      // If timer hits 0 and we weren't already waiting, set waiting state\r\n      if (timeRemaining === 0 && !this.gameState.isWaitingForWinner) {\r\n        console.log('â° Timer ended - setting waiting for winner state');\r\n        this.gameState.isWaitingForWinner = true;\r\n        this.emit('waitingForWinner', true);\r\n      }\r\n      \r\n      // Emit with safe data structure\r\n      this.emit('timer', {\r\n        timeRemaining,\r\n        roundNumber,\r\n        timeElapsed: typeof data.timeElapsed === 'number' ? data.timeElapsed : 0,\r\n        isActive: Boolean(data.isActive)\r\n      });\r\n    });\r\n\r\n    // Handle round reset\r\n    this.socket.on('roundReset', (data) => {\r\n      console.log('ðŸ”„ Round reset:', data);\r\n      \r\n      // SAFETY: Ensure data exists\r\n      const resetData = data || {};\r\n      const timeRemaining = typeof resetData.timeRemaining === 'number' ? resetData.timeRemaining : 30;\r\n      const roundNumber = typeof resetData.roundNumber === 'number' ? resetData.roundNumber : this.gameState.currentRound;\r\n      \r\n      this.gameState = {\r\n        ...this.gameState,\r\n        isWaitingForWinner: false,\r\n        bettors: [],\r\n        jackpotValue: 0,\r\n        lastWinner: null,\r\n        timeRemaining,\r\n        currentRound: roundNumber\r\n      };\r\n      \r\n      this.emit('roundReset', {\r\n        timeRemaining,\r\n        roundNumber,\r\n        message: resetData.message || 'Round reset'\r\n      });\r\n    });\r\n\r\n    // Handle new round start\r\n    this.socket.on('newRound', (data) => {\r\n      console.log('ðŸŽ° New round started:', data);\r\n      \r\n      // SAFETY: Ensure data exists and has required properties\r\n      if (!data || typeof data !== 'object') {\r\n        console.warn('âš ï¸ Invalid newRound data received:', data);\r\n        return;\r\n      }\r\n      \r\n      const timeRemaining = typeof data.timeRemaining === 'number' ? data.timeRemaining : 30;\r\n      const roundNumber = typeof data.roundNumber === 'number' ? data.roundNumber : (this.gameState.currentRound + 1);\r\n      \r\n      this.gameState = {\r\n        ...this.gameState,\r\n        isWaitingForWinner: false,\r\n        isPostWinnerLoading: false,\r\n        bettors: [],\r\n        jackpotValue: 0,\r\n        lastWinner: null,\r\n        currentRound: roundNumber,\r\n        timeRemaining: timeRemaining\r\n      };\r\n      \r\n      this.emit('newRound', {\r\n        roundNumber,\r\n        timeRemaining,\r\n        isActive: true\r\n      });\r\n      this.emit('gameState', this.gameState);\r\n    });\r\n\r\n    // Handle comprehensive game data updates\r\n    this.socket.on('fullGameUpdate', (data) => {\r\n      console.log('ðŸŽ® Full game data update:', data);\r\n      this.gameState = {\r\n        ...this.gameState,\r\n        ...data\r\n      };\r\n      this.emit('fullGameUpdate', data);\r\n      this.emit('gameState', this.gameState);\r\n    });\r\n\r\n    // Handle legacy bettors update for backwards compatibility\r\n    this.socket.on('bettorsUpdate', (data) => {\r\n      console.log('ðŸ’° Bettors update:', data);\r\n      this.gameState.bettors = data.bettors || [];\r\n      this.gameState.jackpotValue = data.totalPot || 0;\r\n      this.gameState.betCount = data.betCount || 0;\r\n      this.emit('bettorsUpdate', data);\r\n      this.emit('gameState', this.gameState);\r\n    });\r\n  }\r\n\r\n  on(event, callback) {\r\n    if (!this.eventHandlers.has(event)) {\r\n      this.eventHandlers.set(event, new Set());\r\n    }\r\n    \r\n    const handlers = this.eventHandlers.get(event);\r\n    \r\n    // Prevent duplicate handlers\r\n    if (handlers.has(callback)) {\r\n      console.warn(`ðŸ”Œ Duplicate listener for '${event}' event prevented`);\r\n      return;\r\n    }\r\n    \r\n    handlers.add(callback);\r\n    console.log(`ðŸ”Œ Added listener for '${event}' event (${handlers.size} total)`);\r\n  }\r\n\r\n  off(event, callback) {\r\n    const handlers = this.eventHandlers.get(event);\r\n    if (handlers) {\r\n      const wasDeleted = handlers.delete(callback);\r\n      if (wasDeleted) {\r\n        console.log(`ðŸ”Œ Removed listener for '${event}' event (${handlers.size} remaining)`);\r\n      }\r\n    }\r\n  }\r\n\r\n  emit(event, data) {\r\n    const handlers = this.eventHandlers.get(event);\r\n    if (handlers) {\r\n      handlers.forEach(handler => {\r\n        try {\r\n          handler(data);\r\n        } catch (error) {\r\n          console.error(`ðŸš« Error in ${event} handler:`, error);\r\n          console.error('Data that caused error:', data);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  placeBet(betData) {\r\n    if (!this.socket?.connected) {\r\n      console.error('Cannot place bet: Socket not connected');\r\n      return;\r\n    }\r\n    this.socket.emit('placeBet', betData);\r\n  }\r\n\r\n  disconnect() {\r\n    if (this.socket) {\r\n      this.socket.disconnect();\r\n      this.socket = null;\r\n      this.isConnected = false;\r\n    }\r\n  }\r\n\r\n  reconnect() {\r\n    this.disconnect();\r\n    this.connect();\r\n  }\r\n\r\n  getGameState() {\r\n    return this.gameState;\r\n  }\r\n\r\n  isWaitingForWinner() {\r\n    return this.gameState.isWaitingForWinner;\r\n  }\r\n\r\n  isPostWinnerLoading() {\r\n    return this.gameState.isPostWinnerLoading || false;\r\n  }\r\n\r\n  getCurrentRound() {\r\n    return this.gameState.currentRound;\r\n  }\r\n}\r\n\r\n// Create singleton instance\r\nconst socketService = new SocketService();\r\nexport default socketService; "],"mappings":"AAAA,SAASA,EAAE,QAAQ,kBAAkB;AAErC,MAAMC,aAAa,CAAC;EAClBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,MAAM,GAAG,IAAI;IAClB,IAAI,CAACC,aAAa,GAAG,IAAIC,GAAG,CAAC,CAAC;IAC9B,IAAI,CAACC,WAAW,GAAG,KAAK;IACxB,IAAI,CAACC,iBAAiB,GAAG,CAAC;IAC1B,IAAI,CAACC,oBAAoB,GAAG,CAAC;IAC7B,IAAI,CAACC,SAAS,GAAG;MACfC,kBAAkB,EAAE,KAAK;MACzBC,YAAY,EAAE,IAAI;MAClBC,aAAa,EAAE,IAAI;MACnBC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,CAAC;MACfC,OAAO,EAAE;IACX,CAAC;EACH;EAEAC,OAAOA,CAAA,EAAG;IAAA,IAAAC,YAAA,EAAAC,aAAA;IACR;IACA,IAAI,CAAAD,YAAA,OAAI,CAACd,MAAM,cAAAc,YAAA,eAAXA,YAAA,CAAaE,SAAS,KAAAD,aAAA,GAAI,IAAI,CAACf,MAAM,cAAAe,aAAA,eAAXA,aAAA,CAAaE,UAAU,EAAE;MACrDC,OAAO,CAACC,GAAG,CAAC,uEAAuE,CAAC;MACpF;IACF;IAEA,MAAMC,SAAS,GAAG,uBAAuB;IAEzCF,OAAO,CAACC,GAAG,CAAC,uCAAuC,EAAEC,SAAS,CAAC;IAC/D,IAAI,CAACpB,MAAM,GAAGH,EAAE,CAACuB,SAAS,EAAE;MAC1BC,YAAY,EAAE,IAAI;MAClBC,iBAAiB,EAAE,IAAI;MACvBC,oBAAoB,EAAE,IAAI;MAC1BC,oBAAoB,EAAE,IAAI,CAACnB,oBAAoB;MAC/CoB,UAAU,EAAE,CAAC,WAAW,CAAC;MACzBC,eAAe,EAAE;IACnB,CAAC,CAAC;IAEF,IAAI,CAACC,kBAAkB,CAAC,CAAC;EAC3B;EAEAA,kBAAkBA,CAAA,EAAG;IACnB,IAAI,CAAC,IAAI,CAAC3B,MAAM,EAAE;IAElB,IAAI,CAACA,MAAM,CAAC4B,EAAE,CAAC,SAAS,EAAE,MAAM;MAC9BV,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;MAC5C,IAAI,CAAChB,WAAW,GAAG,IAAI;MACvB,IAAI,CAACC,iBAAiB,GAAG,CAAC;;MAE1B;MACA,IAAI,IAAI,CAACJ,MAAM,IAAI,IAAI,CAACA,MAAM,CAACgB,SAAS,EAAE;QACxC,IAAI,CAAChB,MAAM,CAAC6B,IAAI,CAAC,cAAc,CAAC;MAClC;IACF,CAAC,CAAC;IAEF,IAAI,CAAC7B,MAAM,CAAC4B,EAAE,CAAC,YAAY,EAAE,MAAM;MACjCV,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAC;MACjD,IAAI,CAAChB,WAAW,GAAG,KAAK;IAC1B,CAAC,CAAC;IAEF,IAAI,CAACH,MAAM,CAAC4B,EAAE,CAAC,eAAe,EAAGE,KAAK,IAAK;MACzCZ,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEW,KAAK,CAAC;MAC1C,IAAI,CAAC1B,iBAAiB,EAAE;MAExB,IAAI,IAAI,CAACA,iBAAiB,IAAI,IAAI,CAACC,oBAAoB,EAAE;QACvDa,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC;QAClD,IAAI,CAACnB,MAAM,CAAC+B,UAAU,CAAC,CAAC;MAC1B;IACF,CAAC,CAAC;;IAEF;IACA,IAAI,CAAC/B,MAAM,CAAC4B,EAAE,CAAC,WAAW,EAAGI,IAAI,IAAK;MACpCd,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEa,IAAI,CAAC;MAE5C,IAAI,CAAC1B,SAAS,GAAG;QACf,GAAG,IAAI,CAACA,SAAS;QACjB,GAAG0B;MACL,CAAC;;MAED;MACA,IAAIA,IAAI,CAACvB,aAAa,KAAK,CAAC,IAAI,CAACuB,IAAI,CAACtB,UAAU,EAAE;QAChDQ,OAAO,CAACC,GAAG,CAAC,+DAA+D,CAAC;QAC5E,IAAI,CAACb,SAAS,CAACC,kBAAkB,GAAG,IAAI;QACxC,IAAI,CAACsB,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC;MACrC;MAEA,IAAI,CAACA,IAAI,CAAC,WAAW,EAAE,IAAI,CAACvB,SAAS,CAAC;IACxC,CAAC,CAAC;IAEF,IAAI,CAACN,MAAM,CAAC4B,EAAE,CAAC,QAAQ,EAAGI,IAAI,IAAK;MACjCd,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEa,IAAI,CAAC;MACzC,IAAI,CAAC1B,SAAS,CAACI,UAAU,GAAGsB,IAAI;MAChC,IAAI,CAAC1B,SAAS,CAACC,kBAAkB,GAAG,KAAK;MACzC,IAAI,CAACsB,IAAI,CAAC,QAAQ,EAAEG,IAAI,CAAC;IAC3B,CAAC,CAAC;;IAEF;IACA,IAAI,CAAChC,MAAM,CAAC4B,EAAE,CAAC,oBAAoB,EAAGI,IAAI,IAAK;MAC7Cd,OAAO,CAACC,GAAG,CAAC,yCAAyC,EAAEa,IAAI,CAAC;MAC5D,IAAI,CAAC1B,SAAS,CAACI,UAAU,GAAGsB,IAAI;MAChC,IAAI,CAAC1B,SAAS,CAACC,kBAAkB,GAAG,KAAK;MACzC,IAAI,CAACD,SAAS,CAAC2B,kBAAkB,GAAGD,IAAI;MACxC,IAAI,CAACH,IAAI,CAAC,oBAAoB,EAAEG,IAAI,CAAC;IACvC,CAAC,CAAC;IAEF,IAAI,CAAChC,MAAM,CAAC4B,EAAE,CAAC,QAAQ,EAAGI,IAAI,IAAK;MACjCd,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEa,IAAI,CAAC;MACzC;MACA,IAAI,CAAC,IAAI,CAAC1B,SAAS,CAACM,OAAO,CAACsB,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,OAAO,KAAKJ,IAAI,CAACI,OAAO,CAAC,EAAE;QACjE,IAAI,CAAC9B,SAAS,CAACM,OAAO,CAACyB,IAAI,CAACL,IAAI,CAAC;MACnC;MACA,IAAI,CAAC1B,SAAS,CAACK,YAAY,IAAK2B,UAAU,CAACN,IAAI,CAACO,MAAM,CAAC,GAAG,GAAI,CAAC,CAAC;MAChE,IAAI,CAACV,IAAI,CAAC,QAAQ,EAAEG,IAAI,CAAC;IAC3B,CAAC,CAAC;IAEF,IAAI,CAAChC,MAAM,CAAC4B,EAAE,CAAC,OAAO,EAAGI,IAAI,IAAK;MAChCd,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEa,IAAI,CAAC;;MAEpC;MACA,IAAI,CAACA,IAAI,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;QACrCd,OAAO,CAACsB,IAAI,CAAC,iCAAiC,EAAER,IAAI,CAAC;QACrD;MACF;;MAEA;MACA,MAAMvB,aAAa,GAAG,OAAOuB,IAAI,CAACvB,aAAa,KAAK,QAAQ,GAAGuB,IAAI,CAACvB,aAAa,GAAG,CAAC;MACrF,MAAMgC,WAAW,GAAG,OAAOT,IAAI,CAACS,WAAW,KAAK,QAAQ,GAAGT,IAAI,CAACS,WAAW,GAAG,IAAI,CAACnC,SAAS,CAACE,YAAY;MAEzG,IAAI,CAACF,SAAS,CAACG,aAAa,GAAGA,aAAa;MAC5C,IAAI,CAACH,SAAS,CAACE,YAAY,GAAGiC,WAAW;;MAEzC;MACA,IAAIhC,aAAa,KAAK,CAAC,IAAI,CAAC,IAAI,CAACH,SAAS,CAACC,kBAAkB,EAAE;QAC7DW,OAAO,CAACC,GAAG,CAAC,kDAAkD,CAAC;QAC/D,IAAI,CAACb,SAAS,CAACC,kBAAkB,GAAG,IAAI;QACxC,IAAI,CAACsB,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC;MACrC;;MAEA;MACA,IAAI,CAACA,IAAI,CAAC,OAAO,EAAE;QACjBpB,aAAa;QACbgC,WAAW;QACXC,WAAW,EAAE,OAAOV,IAAI,CAACU,WAAW,KAAK,QAAQ,GAAGV,IAAI,CAACU,WAAW,GAAG,CAAC;QACxEC,QAAQ,EAAEC,OAAO,CAACZ,IAAI,CAACW,QAAQ;MACjC,CAAC,CAAC;IACJ,CAAC,CAAC;;IAEF;IACA,IAAI,CAAC3C,MAAM,CAAC4B,EAAE,CAAC,YAAY,EAAGI,IAAI,IAAK;MACrCd,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEa,IAAI,CAAC;;MAEpC;MACA,MAAMa,SAAS,GAAGb,IAAI,IAAI,CAAC,CAAC;MAC5B,MAAMvB,aAAa,GAAG,OAAOoC,SAAS,CAACpC,aAAa,KAAK,QAAQ,GAAGoC,SAAS,CAACpC,aAAa,GAAG,EAAE;MAChG,MAAMgC,WAAW,GAAG,OAAOI,SAAS,CAACJ,WAAW,KAAK,QAAQ,GAAGI,SAAS,CAACJ,WAAW,GAAG,IAAI,CAACnC,SAAS,CAACE,YAAY;MAEnH,IAAI,CAACF,SAAS,GAAG;QACf,GAAG,IAAI,CAACA,SAAS;QACjBC,kBAAkB,EAAE,KAAK;QACzBK,OAAO,EAAE,EAAE;QACXD,YAAY,EAAE,CAAC;QACfD,UAAU,EAAE,IAAI;QAChBD,aAAa;QACbD,YAAY,EAAEiC;MAChB,CAAC;MAED,IAAI,CAACZ,IAAI,CAAC,YAAY,EAAE;QACtBpB,aAAa;QACbgC,WAAW;QACXK,OAAO,EAAED,SAAS,CAACC,OAAO,IAAI;MAChC,CAAC,CAAC;IACJ,CAAC,CAAC;;IAEF;IACA,IAAI,CAAC9C,MAAM,CAAC4B,EAAE,CAAC,UAAU,EAAGI,IAAI,IAAK;MACnCd,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEa,IAAI,CAAC;;MAE1C;MACA,IAAI,CAACA,IAAI,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;QACrCd,OAAO,CAACsB,IAAI,CAAC,oCAAoC,EAAER,IAAI,CAAC;QACxD;MACF;MAEA,MAAMvB,aAAa,GAAG,OAAOuB,IAAI,CAACvB,aAAa,KAAK,QAAQ,GAAGuB,IAAI,CAACvB,aAAa,GAAG,EAAE;MACtF,MAAMgC,WAAW,GAAG,OAAOT,IAAI,CAACS,WAAW,KAAK,QAAQ,GAAGT,IAAI,CAACS,WAAW,GAAI,IAAI,CAACnC,SAAS,CAACE,YAAY,GAAG,CAAE;MAE/G,IAAI,CAACF,SAAS,GAAG;QACf,GAAG,IAAI,CAACA,SAAS;QACjBC,kBAAkB,EAAE,KAAK;QACzBwC,mBAAmB,EAAE,KAAK;QAC1BnC,OAAO,EAAE,EAAE;QACXD,YAAY,EAAE,CAAC;QACfD,UAAU,EAAE,IAAI;QAChBF,YAAY,EAAEiC,WAAW;QACzBhC,aAAa,EAAEA;MACjB,CAAC;MAED,IAAI,CAACoB,IAAI,CAAC,UAAU,EAAE;QACpBY,WAAW;QACXhC,aAAa;QACbkC,QAAQ,EAAE;MACZ,CAAC,CAAC;MACF,IAAI,CAACd,IAAI,CAAC,WAAW,EAAE,IAAI,CAACvB,SAAS,CAAC;IACxC,CAAC,CAAC;;IAEF;IACA,IAAI,CAACN,MAAM,CAAC4B,EAAE,CAAC,gBAAgB,EAAGI,IAAI,IAAK;MACzCd,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAEa,IAAI,CAAC;MAC9C,IAAI,CAAC1B,SAAS,GAAG;QACf,GAAG,IAAI,CAACA,SAAS;QACjB,GAAG0B;MACL,CAAC;MACD,IAAI,CAACH,IAAI,CAAC,gBAAgB,EAAEG,IAAI,CAAC;MACjC,IAAI,CAACH,IAAI,CAAC,WAAW,EAAE,IAAI,CAACvB,SAAS,CAAC;IACxC,CAAC,CAAC;;IAEF;IACA,IAAI,CAACN,MAAM,CAAC4B,EAAE,CAAC,eAAe,EAAGI,IAAI,IAAK;MACxCd,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEa,IAAI,CAAC;MACvC,IAAI,CAAC1B,SAAS,CAACM,OAAO,GAAGoB,IAAI,CAACpB,OAAO,IAAI,EAAE;MAC3C,IAAI,CAACN,SAAS,CAACK,YAAY,GAAGqB,IAAI,CAACgB,QAAQ,IAAI,CAAC;MAChD,IAAI,CAAC1C,SAAS,CAAC2C,QAAQ,GAAGjB,IAAI,CAACiB,QAAQ,IAAI,CAAC;MAC5C,IAAI,CAACpB,IAAI,CAAC,eAAe,EAAEG,IAAI,CAAC;MAChC,IAAI,CAACH,IAAI,CAAC,WAAW,EAAE,IAAI,CAACvB,SAAS,CAAC;IACxC,CAAC,CAAC;EACJ;EAEAsB,EAAEA,CAACsB,KAAK,EAAEC,QAAQ,EAAE;IAClB,IAAI,CAAC,IAAI,CAAClD,aAAa,CAACmD,GAAG,CAACF,KAAK,CAAC,EAAE;MAClC,IAAI,CAACjD,aAAa,CAACoD,GAAG,CAACH,KAAK,EAAE,IAAII,GAAG,CAAC,CAAC,CAAC;IAC1C;IAEA,MAAMC,QAAQ,GAAG,IAAI,CAACtD,aAAa,CAACuD,GAAG,CAACN,KAAK,CAAC;;IAE9C;IACA,IAAIK,QAAQ,CAACH,GAAG,CAACD,QAAQ,CAAC,EAAE;MAC1BjC,OAAO,CAACsB,IAAI,CAAC,8BAA8BU,KAAK,mBAAmB,CAAC;MACpE;IACF;IAEAK,QAAQ,CAACE,GAAG,CAACN,QAAQ,CAAC;IACtBjC,OAAO,CAACC,GAAG,CAAC,0BAA0B+B,KAAK,YAAYK,QAAQ,CAACG,IAAI,SAAS,CAAC;EAChF;EAEAC,GAAGA,CAACT,KAAK,EAAEC,QAAQ,EAAE;IACnB,MAAMI,QAAQ,GAAG,IAAI,CAACtD,aAAa,CAACuD,GAAG,CAACN,KAAK,CAAC;IAC9C,IAAIK,QAAQ,EAAE;MACZ,MAAMK,UAAU,GAAGL,QAAQ,CAACM,MAAM,CAACV,QAAQ,CAAC;MAC5C,IAAIS,UAAU,EAAE;QACd1C,OAAO,CAACC,GAAG,CAAC,4BAA4B+B,KAAK,YAAYK,QAAQ,CAACG,IAAI,aAAa,CAAC;MACtF;IACF;EACF;EAEA7B,IAAIA,CAACqB,KAAK,EAAElB,IAAI,EAAE;IAChB,MAAMuB,QAAQ,GAAG,IAAI,CAACtD,aAAa,CAACuD,GAAG,CAACN,KAAK,CAAC;IAC9C,IAAIK,QAAQ,EAAE;MACZA,QAAQ,CAACO,OAAO,CAACC,OAAO,IAAI;QAC1B,IAAI;UACFA,OAAO,CAAC/B,IAAI,CAAC;QACf,CAAC,CAAC,OAAOF,KAAK,EAAE;UACdZ,OAAO,CAACY,KAAK,CAAC,eAAeoB,KAAK,WAAW,EAAEpB,KAAK,CAAC;UACrDZ,OAAO,CAACY,KAAK,CAAC,yBAAyB,EAAEE,IAAI,CAAC;QAChD;MACF,CAAC,CAAC;IACJ;EACF;EAEAgC,QAAQA,CAACC,OAAO,EAAE;IAAA,IAAAC,aAAA;IAChB,IAAI,GAAAA,aAAA,GAAC,IAAI,CAAClE,MAAM,cAAAkE,aAAA,eAAXA,aAAA,CAAalD,SAAS,GAAE;MAC3BE,OAAO,CAACY,KAAK,CAAC,wCAAwC,CAAC;MACvD;IACF;IACA,IAAI,CAAC9B,MAAM,CAAC6B,IAAI,CAAC,UAAU,EAAEoC,OAAO,CAAC;EACvC;EAEAlC,UAAUA,CAAA,EAAG;IACX,IAAI,IAAI,CAAC/B,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAAC+B,UAAU,CAAC,CAAC;MACxB,IAAI,CAAC/B,MAAM,GAAG,IAAI;MAClB,IAAI,CAACG,WAAW,GAAG,KAAK;IAC1B;EACF;EAEAgE,SAASA,CAAA,EAAG;IACV,IAAI,CAACpC,UAAU,CAAC,CAAC;IACjB,IAAI,CAAClB,OAAO,CAAC,CAAC;EAChB;EAEAuD,YAAYA,CAAA,EAAG;IACb,OAAO,IAAI,CAAC9D,SAAS;EACvB;EAEAC,kBAAkBA,CAAA,EAAG;IACnB,OAAO,IAAI,CAACD,SAAS,CAACC,kBAAkB;EAC1C;EAEAwC,mBAAmBA,CAAA,EAAG;IACpB,OAAO,IAAI,CAACzC,SAAS,CAACyC,mBAAmB,IAAI,KAAK;EACpD;EAEAsB,eAAeA,CAAA,EAAG;IAChB,OAAO,IAAI,CAAC/D,SAAS,CAACE,YAAY;EACpC;AACF;;AAEA;AACA,MAAM8D,aAAa,GAAG,IAAIxE,aAAa,CAAC,CAAC;AACzC,eAAewE,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}